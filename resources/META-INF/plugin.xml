<idea-plugin>
  <id>com.badahori.creatures.plugins.intellij.agenteering</id>
  <name>Creatures CAOS and Agenteering</name>
  <version>0.01</version>
  <vendor>Bedalton</vendor>

  <description><![CDATA[
    This plugin aims to provide simple CAOS and agent editing for a variety of Creatures variants<br/>
    Supports:<br/>
    <ul>
      <li>Creatures 1</li>
      <li>Creatures 2</li>
      <li>Creatures Village (Mostly)</li>
      <li>Creatures 3</li>
      <li>Docking Station</li>
    </ul>
    Implemented
    <ul>
      <li>Syntax Highlighting</li>
      <li>Basic completion</li>
      <li>Definition reference</li>
      <li>Parameter hints</li>
      <li>Known value completion from list. (ie. Drives or Chemicals by name)</li>
      <li>SPR viewer</li>
    </ul>
    Todo:
    <ul>
      <li>COB compiler/decompiler</li>
      <li>Pray File editing</li>
      <li>SPR, C16 and S16 compilers</li>
      <li>C16 and S16 viewers</li>
    </ul>
    ]]></description>

  <change-notes><![CDATA[
    <ul>
      <li>
        <b>0.01</b>
        <ul>
          <li>initial implementation</li>
          <li>Syntax Highlighting</li>
          <li>Basic completion</li>
          <li>Definition reference</li>
          <li>Parameter hints</li>
        </ul>
      </li>
    </ul>
    ]]>
  </change-notes>

  <!-- please see http://www.jetbrains.org/intellij/sdk/docs/basics/getting_started/build_number_ranges.html for description -->
  <idea-version since-build="191.5600" />

  <!-- please see http://www.jetbrains.org/intellij/sdk/docs/basics/getting_started/plugin_compatibility.html
       on how to target different products -->
  <depends>com.intellij.modules.platform</depends>
  <depends>com.intellij.modules.lang</depends>

  <extensions defaultExtensionNs="com.intellij">


    <!-- ======================== -->
    <!-- ===== CAOS Script ====== -->
    <!-- ======================== -->
    <!-- LANG -->
    <fileTypeFactory
        implementation="com.badahori.creatures.plugins.intellij.agenteering.caos.lang.CaosScriptFileTypeFactory" />
    <lang.parserDefinition
        implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.parser.CaosScriptParserDefinition"
        language="CaosScript" />
    <editorNotificationProvider
        implementation="com.badahori.creatures.plugins.intellij.agenteering.caos.project.editor.CaosScriptEditorToolbar" />
    <lang.findUsagesProvider language="CaosScript"
                             implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.references.CaosScriptUsagesProvider" />
    <moduleType id="CAOS_MODULE"
                implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.project.module.CaosScriptModuleType"
                classpathProvider="true" />

    <!-- Completion -->
    <completion.contributor language="CaosScript"
                            implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.completion.CaosScriptCompletionContributor" />
    <editorTypedHandler
        implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.completion.CaosScriptTypedHandler"
    />

    <!-- Project -->
    <iconProvider
        implementation="com.badahori.creatures.plugins.intellij.agenteering.caos.project.module.CaosModuleIconProvider"
    />
    <projectTemplatesFactory
        implementation="com.badahori.creatures.plugins.intellij.agenteering.caos.project.template.CaosScriptTemplateFactory" />
    <moduleConfigurationEditorProvider
        implementation="com.badahori.creatures.plugins.intellij.agenteering.caos.project.module.CaosModuleConfigurationEditorProvider" />
    <!-- Formatting -->
    <lang.formatter language="CaosScript"
                    implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.formatting.CaosScriptFormattingModelBuilder" />

    <!-- Code Style Settings -->
    <codeStyleSettingsProvider
        implementation="com.badahori.creatures.plugins.intellij.agenteering.caos.formatting.CaosScriptCodeStyleSettingsProvider" />
    <langCodeStyleSettingsProvider
        implementation="com.badahori.creatures.plugins.intellij.agenteering.caos.formatting.CaosScriptLanguageCodeStyleSettingsProvider" />

    <!-- Highlighting -->
    <lang.syntaxHighlighterFactory
        implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.highlighting.CaosScriptSyntaxHighlighterFactory"
        language="CaosScript"
        key="CaosScript"
    />
    <colorSettingsPage
        implementation="com.badahori.creatures.plugins.intellij.agenteering.caos.highlighting.CaosScriptColorSettingsPage" />
    <annotator language="CaosScript"
               implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.highlighting.CaosScriptHighlighterAnnotator" />
    <additionalTextAttributes scheme="Default" file="colorSchemes/CaosScriptColorSchemeDefault.xml" />
    <additionalTextAttributes scheme="Default" file="colorSchemes/CaosScriptDefColorSchemeDarcula.xml" />

    <!-- Annotators -->
    <annotator language="CaosScript"
               implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.annotators.CaosScriptSyntaxErrorAnnotator" />
    <annotator language="CaosScript"
               implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.annotators.CaosScriptEnumAnnotator"
               order="first"
    />
    <annotator language="CaosScript"
               implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.annotators.CaosScriptCommandCaseAnnotator" />
    <annotator language="CaosScript"
               implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.annotators.CaosScriptHelperActionAnnotator" />
    <annotator language="CaosScript"
               implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.annotators.CaosScriptGhostElementAnnotator" />

    <!-- Inspections -->
    <localInspection language="CaosScript"
                     implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.inspections.CaosScriptTypesInspection"
                     level="WARNING"
                     groupName="CaosScript"
                     enabledByDefault="true"
                     displayName="Expected parameter type"
                     shortName="ExpectedParameterType"
                     order="last"
    />
    <localInspection language="CaosScript"
                     implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.inspections.CaosScriptCAssignmentInspection"
                     level="ERROR"
                     groupName="CaosScript"
                     enabledByDefault="true"
                     displayName="Assigned value is of expected type"
                     shortName="ExpectedAssigmentType"
    />

    <localInspection language="CaosScript"
                     implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.inspections.CaosScriptSubroutineInspection"
                     level="ERROR"
                     groupName="CaosScript"
                     enabledByDefault="true"
                     displayName="Subroutine Is Defined Check"
                     shortName="SubroutineIsDefined"
    />
    <localInspection language="CaosScript"
                     implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.inspections.CaosScriptRandomVarOutOfOrderInspection"
                     level="WARNING"
                     groupName="CaosScript"
                     enabledByDefault="true"
                     displayName="RNDV values out of order"
                     shortName="RNDVOutOfOrder"
    />
    <localInspection language="CaosScript"
                     implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.inspections.CaosScriptRandomValueIsTheSameInspection"
                     level="WEAK WARNING"
                     groupName="CaosScript"
                     enabledByDefault="true"
                     displayName="Rndv value is always the same"
                     shortName="RndvIsTheSame"
    />

    <localInspection language="CaosScript"
                     implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.inspections.CaosCommandUndocumentedCommandUsage"
                     level="WEAK WARNING"
                     groupName="CaosScript"
                     enabledByDefault="true"
                     displayName="Undocumented command usage"
                     shortName="UndocumentedCommandUsage"
    />

    <!-- Documentation & Hints -->
    <codeInsight.parameterNameHints language="CaosScript"
                                    implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.hints.CaosScriptInlayHintsProvider" />
    <documentationProvider
        implementation="com.badahori.creatures.plugins.intellij.agenteering.caos.documentation.CaosScriptDocumentationProvider" />

    <!--lang.foldingBuilder language="CaosScript"
                         implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.hints.CaosScriptRValueFoldingBuilder"/-->
    <lang.foldingBuilder language="CaosScript"
                         implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.hints.CaosScriptStimFoldingBuilder" />
    <lang.braceMatcher language="CaosScript"
                       implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.formatting.CaosScriptBraceMatcher" />
    <lang.quoteHandler implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.formatting.CaosScriptQuoteHandler" />

    <!-- Indices -->
    <applicationService
        serviceInterface="com.badahori.creatures.plugins.intellij.agenteering.caos.indices.CaosScriptIndexService"
        serviceImplementation="com.badahori.creatures.plugins.intellij.agenteering.caos.indices.CaosScriptIndexServiceImpl" />
    <stubElementTypeHolder
        class="com.badahori.creatures.plugins.intellij.agenteering.caos.stubs.types.CaosScriptStubTypes" />
    <stubIndex
        implementation="com.badahori.creatures.plugins.intellij.agenteering.caos.indices.CaosScriptConstAssignmentIndex" />
    <stubIndex
        implementation="com.badahori.creatures.plugins.intellij.agenteering.caos.indices.CaosScriptNamedVarAssignmentIndex" />
    <stubIndex
        implementation="com.badahori.creatures.plugins.intellij.agenteering.caos.indices.CaosScriptNamedVarUseIndex" />
    <stubIndex
        implementation="com.badahori.creatures.plugins.intellij.agenteering.caos.indices.CaosScriptSubroutineIndex" />
    <stubIndex
        implementation="com.badahori.creatures.plugins.intellij.agenteering.caos.indices.CaosScriptVarAssignmentIndex" />

    <!-- Actions -->
    <!--enterHandlerDelegate
        id="CaosScriptEnterDelegate"
        implementation="com.badahori.creatures.plugins.intellij.agenteering.caos.formatting.CaosScriptEnterDelegate" / -->

    <!-- ======================== -->
    <!-- ======= CAOS DEF ======= -->
    <!-- ======================== -->
    <!-- LANG -->
    <lang.parserDefinition
        implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.def.parser.CaosDefParserDefinition"
        language="CaosDef" />
    <completion.contributor language="CaosDef"
                            implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.def.contributor.CaosDefCompletionContributor" />
    <lang.findUsagesProvider
        implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.def.references.CaosDefUsagesProvider"
        language="CaosDef" />

    <!-- Bundled Definitions -->
    <library.type
        implementation="com.badahori.creatures.plugins.intellij.agenteering.caos.project.library.CaosLibraryType"
        id="CaosLibrary" />

    <!-- Highlighting -->
    <syntaxHighlighter
        implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.def.highlighting.CaosDefSyntaxHighlighter"
        key="CaosDef" />
    <lang.syntaxHighlighterFactory
        implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.def.highlighting.CaosDefSyntaxHighlighterFactory"
        language="CaosDef" />
    <annotator language="CaosDef"
               implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.def.highlighting.CaosDefHighlighterAnnotator" />
    <additionalTextAttributes scheme="Default" file="colorSchemes/CaosDefColorSchemeDefault.xml" />
    <additionalTextAttributes scheme="Default" file="colorSchemes/CaosDefColorSchemeDarcula.xml" />


    <!-- Indices -->
    <stubElementTypeHolder
        class="com.badahori.creatures.plugins.intellij.agenteering.caos.stubs.types.CaosScriptStubTypes" />
    <applicationService
        serviceInterface="com.badahori.creatures.plugins.intellij.agenteering.caos.def.indices.CaosDefStubIndexService"
        serviceImplementation="com.badahori.creatures.plugins.intellij.agenteering.caos.def.indices.CaosDefStubIndexServiceImpl" />
    <stubIndex
        implementation="com.badahori.creatures.plugins.intellij.agenteering.caos.def.indices.CaosDefCommandElementsByNameIndex" />
    <stubIndex
        implementation="com.badahori.creatures.plugins.intellij.agenteering.caos.def.indices.CaosDefHashTagsIndex" />
    <stubIndex
        implementation="com.badahori.creatures.plugins.intellij.agenteering.caos.def.indices.CaosDefTypeDefinitionElementsByNameIndex" />

    <!-- Formatting -->
    <lang.braceMatcher language="CaosDef"
                       implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.def.format.CaosDefBraceMatcher" />
    <enterBetweenBracesDelegate language="CaosDef"
                                implementationClass="com.badahori.creatures.plugins.intellij.agenteering.caos.def.format.CaosDefEnterBetweenBracesDelegate" />


    <!-- ======================== -->
    <!-- ====== SPR Files ======= -->
    <!-- ======================== -->
    <fileType name="SPR file"
              implementationClass="com.badahori.creatures.plugins.intellij.agenteering.sprites.spr.SprFileType"
              fieldName="INSTANCE"
              language="CreaturesSPR" extensions="spr" />
    <fileEditorProvider
        implementation="com.badahori.creatures.plugins.intellij.agenteering.sprites.spr.SprFileEditorProvider" />
    <!-- Add your extensions here -->
  </extensions>

  <actions>
    <!-- Add your actions here -->
    <action
        id="CaosScript.NewFile"
        icon="CaosScriptIcons.CAOS_FILE_ICON"
        class="com.badahori.creatures.plugins.intellij.agenteering.caos.action.CaosScriptNewFileAction">
      <add-to-group group-id="NewGroup" anchor="after" relative-to-action="NewFile" />
    </action>
  </actions>

  <module-components>
    <component>
      <implementation-class>com.badahori.creatures.plugins.intellij.agenteering.caos.project.module.CaosModuleSettingsComponent</implementation-class>
    </component>
  </module-components>

  <project-components>
    <component>
      <implementation-class>com.badahori.creatures.plugins.intellij.agenteering.caos.project.CaosProjectComponent
      </implementation-class>
    </component>
  </project-components>
  <application-components>
  </application-components>
</idea-plugin>